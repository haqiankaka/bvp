function u =opt_func(x)

last_u = 10000;

for t = 0 : 0.01:1
    
    
    xt = x(1)*t^5 + x(2)*t^4 + x(3)*t^3 + x(4)*t^2 + x(5)*t + x(6);
    yt = x(7)*t^5 + x(8)*t^4 + x(9)*t^3 + x(10)*t^2 + x(11)*t + x(12);
    
    linear_jerk = (2*(60*x(1)*t^2 + 24*x(2)*t + 6*x(3))*(5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5)) + 2*(60*x(7)*t^2 + 24*x(8)*t + 6*x(9))*(5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11)) + 2*(20*x(1)*t^3 + 12*x(2)*t^2 + 6*x(3)*t + 2*x(4))^2 + 2*(20*x(7)*t^3 + 12*x(8)*t^2 + 6*x(9)*t + 2*x(10))^2)/(2*((5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5))^2 + (5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11))^2)^(1/2)) - (2*(20*x(1)*t^3 + 12*x(2)*t^2 + 6*x(3)*t + 2*x(4))*(5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5)) + 2*(20*x(7)*t^3 + 12*x(8)*t^2 + 6*x(9)*t + 2*x(10))*(5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11)))^2/(4*((5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5))^2 + (5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11))^2)^(3/2))

    angular_jerk = ((24*x(8) + 120*x(7)*t)*(5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5)) - (24*x(2) + 120*x(1)*t)*(5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11)) + (60*x(7)*t^2 + 24*x(8)*t + 6*x(9))*(20*x(1)*t^3 + 12*x(2)*t^2 + 6*x(3)*t + 2*x(4)) - (60*x(1)*t^2 + 24*x(2)*t + 6*x(3))*(20*x(7)*t^3 + 12*x(8)*t^2 + 6*x(9)*t + 2*x(10)))/((5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5))^2 + (5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11))^2) - (2*((60*x(7)*t^2 + 24*x(8)*t + 6*x(9))*(5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5)) - (60*x(1)*t^2 + 24*x(2)*t + 6*x(3))*(5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11)))*(2*(20*x(1)*t^3 + 12*x(2)*t^2 + 6*x(3)*t + 2*x(4))*(5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5)) + 2*(20*x(7)*t^3 + 12*x(8)*t^2 + 6*x(9)*t + 2*x(10))*(5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11))))/((5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5))^2 + (5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11))^2)^2 - (((20*x(7)*t^3 + 12*x(8)*t^2 + 6*x(9)*t + 2*x(10))*(5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5)) - (20*x(1)*t^3 + 12*x(2)*t^2 + 6*x(3)*t + 2*x(4))*(5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11)))*(2*(60*x(1)*t^2 + 24*x(2)*t + 6*x(3))*(5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5)) + 2*(60*x(7)*t^2 + 24*x(8)*t + 6*x(9))*(5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11)) + 2*(20*x(1)*t^3 + 12*x(2)*t^2 + 6*x(3)*t + 2*x(4))^2 + 2*(20*x(7)*t^3 + 12*x(8)*t^2 + 6*x(9)*t + 2*x(10))^2))/((5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5))^2 + (5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11))^2)^2 + (2*((20*x(7)*t^3 + 12*x(8)*t^2 + 6*x(9)*t + 2*x(10))*(5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5)) - (20*x(1)*t^3 + 12*x(2)*t^2 + 6*x(3)*t + 2*x(4))*(5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11)))*(2*(20*x(1)*t^3 + 12*x(2)*t^2 + 6*x(3)*t + 2*x(4))*(5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5)) + 2*(20*x(7)*t^3 + 12*x(8)*t^2 + 6*x(9)*t + 2*x(10))*(5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11)))^2)/((5*x(1)*t^4 + 4*x(2)*t^3 + 3*x(3)*t^2 + 2*x(4)*t + x(5))^2 + (5*x(7)*t^4 + 4*x(8)*t^3 + 3*x(9)*t^2 + 2*x(10)*t + x(11))^2)^3
    u = last_u;
    %opt function
    if ~isnan(linear_jerk) && ~isnan(angular_jerk)
        u = last_u+linear_jerk^2 +angular_jerk^2;
    end
    %u = last_u + xt^2;
    plot(xt,yt,'*');
    hold on
    last_u = u;
end


end